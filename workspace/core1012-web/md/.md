# Update
## 준영속상태
- 변경 감지 기능 사용
- 병합(merge) 사용
```java
Item item = new Item();
...
em.merge(item);
```
### 문제점
> merge 사용을 권장하지 않으며, 실무에서 절대 쓰지 않는다.
- 변경을 명시하지 않는 컬럼은 null로 update가 된다.
```java
@Entity
class Item{
   @Id
   private Long id;
   private String name;
   private Integer price;
   private Integer stockQuantity;
}
...
   item.setPrice(1000);
   item.setStockQuantity(100);
```
```sql
update item
   set name=?, price=?, stock_quantity=?
   where item_id=?
```
- 그러므로 모든 컬럼에 값을 지정해야 되는 불편함이 생긴다.
- 필요한 값만 update를 원한다면 변경감지를 해줘야 되는데 merge는 그렇게 못한다.

## 준영속과 비영속의 차이점
- 준영속은 영속상태가 한 번이라도 되어 본 적이 있는 엔티티을 의미한다.
- 비영속은 이러한 영속상태를 되어 못 적이 없는 엔티티를 말한다.